webpackJsonp([2],{0:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(1),s=o(i),c=n(19),d=n(18),p=n(226),f=o(p),m=n(222),h=o(m);n(241);var y=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),l(t,[{key:"render",value:function(){return s.default.createElement(d.Provider,{store:h.default},s.default.createElement(f.default,null))}}]),t}(s.default.Component);(0,c.render)(s.default.createElement(y,null),document.getElementById("form-builder"))},84:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(1),s=o(i),c=n(15),d=n(223),p=o(d),f=function(e){function t(){var e,n,o,u;r(this,t);for(var l=arguments.length,i=Array(l),s=0;s<l;s++)i[s]=arguments[s];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.addChoiceHandler=function(){var e={key:o.props.next_id,value:"",text:""};o.props.showRequired&&(e.required=!0),o.props.addChoice(e)},o.updateChoiceHandler=function(e){o.props.updateChoice(o.props.choices.findIndex(function(t){return t.key===e.key}),e)},o.removeChoiceHandler=function(e){o.props.removeChoice(o.props.choices.findIndex(function(t){return t.key===e}))},u=n,a(o,u)}return u(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props.choices.map(function(t){return s.default.createElement(p.default,{key:t.key,choice:t,choiceType:e.props.listType,updateChoice:e.updateChoiceHandler,removeChoice:e.removeChoiceHandler,valuePlaceholder:e.props.valuePlaceholder,textPlaceholder:e.props.textPlaceholder,showRequired:e.props.showRequired})});return s.default.createElement("div",{className:"choice-list"},s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-md-9"},t),s.default.createElement("div",{className:"col-md-3"},s.default.createElement(c.Button,{onClick:this.addChoiceHandler},s.default.createElement(c.Glyphicon,{glyph:"plus"})," ",this.props.buttonText))))}}]),t}(s.default.Component);t.default=f},221:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case"update_name":e=(0,u.default)(e,{form:{name:{$set:t.text}}});break;case"update_code":e=(0,u.default)(e,{form:{code:{$set:t.text}}});break;case"update_description":e=(0,u.default)(e,{form:{description:{$set:t.text}}});break;case"add_question":e=(0,u.default)(e,{form:{contents:{questions:{$push:[t.question]},next_id:{$set:t.question.key+1}}}});break;case"update_question":var n=e.form.contents.questions.findIndex(function(e){return e.key===t.question.key});e=(0,u.default)(e,{form:{contents:{questions:{$splice:[[n,1,t.question]]}}}});break;case"remove_question":var o=e.form.contents.questions.findIndex(function(e){return e.key===t.key});e=(0,u.default)(e,{form:{contents:{questions:{$splice:[[o,1]]}}}});break;case"update_active_element":e=(0,u.default)(e,{status:{active_element:{$set:t.key}}});break;case"set_fetching":e=(0,u.default)(e,{status:{is_fetching:{$set:!0},message:{$set:""}}});break;case"get_form_success":e=(0,u.default)(e,{form:{$set:t.form},status:{is_fetching:{$set:!1},message:{$set:"Encuesta cargada."}}});break;case"get_form_error":e=(0,u.default)(e,{status:{is_fetching:{$set:!1},message:{$set:"Error al cargar encuesta."}}});break;case"post_form_success":e=(0,u.default)(e,{form:{id:{$set:t.id}},status:{is_fetching:{$set:!1},message:{$set:"Encuesta guardada"}}});break;case"post_form_error":e=(0,u.default)(e,{status:{is_fetching:{$set:!1},message:{$set:"Error al guardar encuesta"}}});break;case"status_dismiss_notification":e=(0,u.default)(e,{status:{message:{$set:""}}})}return e=(0,u.default)(e,{status:{last_action:{$set:t.type}}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(22),u=o(a),l={form:{id:0,code:"",name:"",description:"",contents:{next_id:1,questions:[]}},status:{last_code:1,is_fetching:!1,message:"",active_element:0,last_action:""}}},222:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(83),a=n(221),u=o(a),l=(0,r.createStore)(u.default,window.devToolsExtension&&window.devToolsExtension());t.default=l},223:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(1),s=o(i),c=n(22),d=o(c),p=n(15),f=function(e){function t(){var e,n,o,u;r(this,t);for(var l=arguments.length,i=Array(l),s=0;s<l;s++)i[s]=arguments[s];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.updateValueHandler=function(e){o.props.updateChoice((0,d.default)(o.props.choice,{value:{$set:e.target.value}}))},o.updateTextHandler=function(e){o.props.updateChoice((0,d.default)(o.props.choice,{text:{$set:e.target.value}}))},o.updateRequiredHandler=function(){o.props.updateChoice((0,d.default)(o.props.choice,{required:{$set:!o.props.choice.required}}))},o.removeChoiceHandler=function(){o.props.removeChoice(o.props.choice.key)},u=n,a(o,u)}return u(t,e),l(t,[{key:"render",value:function(){var e="";"check"===this.props.choiceType?e=s.default.createElement("div",{className:"col-md-1"},s.default.createElement("input",{className:"choice-list-element",type:"checkbox",value:"n",disabled:!0})):"radio"===this.props.choiceType&&(e=s.default.createElement("div",{className:"col-md-1"},s.default.createElement("input",{className:"choice-list-element",type:"radio",value:"n",disabled:!0})));var t="";return this.props.showRequired&&(t=s.default.createElement("div",{className:"col-md-2"},s.default.createElement(p.Checkbox,{className:"pull-left",defaultChecked:this.props.choice.required,onChange:this.updateRequiredHandler},"Obligatoria"))),s.default.createElement("div",{className:"choice"},s.default.createElement("div",{className:"row"},e,s.default.createElement("div",{className:"col-md-2"},s.default.createElement(p.FormGroup,null,s.default.createElement(p.FormControl,{type:"text",placeholder:this.props.valuePlaceholder,defaultValue:this.props.choice.value,onChange:this.updateValueHandler}))),s.default.createElement("div",{className:"col-md-5"},s.default.createElement(p.FormGroup,null,s.default.createElement(p.FormControl,{type:"text",placeholder:this.props.textPlaceholder,defaultValue:this.props.choice.text,onChange:this.updateTextHandler}))),t,s.default.createElement("div",{className:"col-md-1"},s.default.createElement(p.Button,{bsStyle:"link",onClick:this.removeChoiceHandler,tabIndex:"-1"},s.default.createElement(p.Glyphicon,{glyph:"remove"})))))}}]),t}(s.default.Component);t.default=f},224:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(1),s=o(i),c=n(22),d=o(c),p=n(15),f=n(84),m=o(f),h=function(e){function t(){var e,n,o,u;r(this,t);for(var l=arguments.length,i=Array(l),s=0;s<l;s++)i[s]=arguments[s];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.updateCodeSuffixHandler=function(e){o.props.updateColumn((0,d.default)(o.props.column,{code_suffix:{$set:e.target.value}}))},o.updateTypeHandler=function(e){o.props.updateColumn((0,d.default)(o.props.column,{type:{$set:e.target.value}}))},o.updateHeaderHandler=function(e){o.props.updateColumn((0,d.default)(o.props.column,{header:{$set:e.target.value}}))},o.removeColumnHandler=function(){o.props.removeColumn(o.props.column.key)},o.addChoiceHandler=function(e){o.props.updateColumn((0,d.default)(o.props.column,{next_id:{$set:o.props.column.next_id+1},choices:{$push:[e]}}))},o.updateChoiceHandler=function(e,t){o.props.updateColumn((0,d.default)(o.props.column,{choices:{$splice:[[e,1,t]]}}))},o.removeChoiceHandler=function(e){o.props.updateColumn((0,d.default)(o.props.column,{choices:{$splice:[[e,1]]}}))},u=n,a(o,u)}return u(t,e),l(t,[{key:"render",value:function(){var e="",t="";return"radio"!==this.props.column.type&&"list"!==this.props.column.type||(e=s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-md-12"},s.default.createElement(m.default,{listType:"radio",choices:this.props.column.choices,next_id:this.props.column.next_id,addChoice:this.addChoiceHandler,updateChoice:this.updateChoiceHandler,removeChoice:this.removeChoiceHandler,valuePlaceholder:"Valor",textPlaceholder:"Opción",buttonText:"Agregar opción"})))),this.props.showCodeSuffix&&(t=s.default.createElement("div",{className:"col-md-2"},s.default.createElement(p.FormGroup,null,s.default.createElement(p.FormControl,{type:"text",placeholder:"Código (sufijo)",defaultValue:this.props.column.code_suffix,onChange:this.updateCodeSuffixHandler})))),s.default.createElement("div",{className:"column"},s.default.createElement("div",{className:"row column-list"},s.default.createElement("div",{className:"col-md-2"},s.default.createElement(p.FormGroup,null,s.default.createElement(p.FormControl,{componentClass:"select",defaultValue:this.props.column.type,onChange:this.updateTypeHandler},s.default.createElement("option",{value:"radio"},"Radio"),s.default.createElement("option",{value:"text"},"Texto"),s.default.createElement("option",{value:"list"},"Lista"),s.default.createElement("option",{value:"check"},"Checkbox")))),t,s.default.createElement("div",{className:"col-md-3"},s.default.createElement(p.FormGroup,null,s.default.createElement(p.FormControl,{type:"text",placeholder:"Encabezado",defaultValue:this.props.column.header,onChange:this.updateHeaderHandler}))),s.default.createElement("div",{className:"col-md-1"},s.default.createElement(p.Button,{bsStyle:"link",onClick:this.removeColumnHandler},s.default.createElement(p.Glyphicon,{glyph:"remove"})))),e)}}]),t}(s.default.Component);t.default=h},225:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(1),s=o(i),c=n(18),d=n(22),p=o(d),f=n(15),m=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateMultipleHandler=function(){n.props.updateQuestion((0,p.default)(n.props.question,{multiple:{$set:!n.props.question.multiple}}))},n.updateMimeTypeHandler=function(e){var t=n.file_types.filter(function(t){return t.file_type===e.target.value})[0];n.props.updateQuestion((0,p.default)(n.props.question,{file_type:{$set:t.file_type},mime_type:{$set:t.mime_type},label:{$set:t.label}}))},n.file_types=[{file_type:"file",mime_type:"",label:"Archivo"},{file_type:"image",mime_type:"image/*",label:"Imagen"},{file_type:"audio",mime_type:"audio/*",label:"Audio"},{file_type:"video",mime_type:"video/*",label:"Video"},{file_type:"document",mime_type:"application/*,text/*",label:"Documento"}],n}return u(t,e),l(t,[{key:"render",value:function(){var e=this.file_types.map(function(e){return s.default.createElement("option",{key:e.file_type,value:e.file_type},e.label)});return s.default.createElement("div",{className:"file-input"},s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-md-3"},s.default.createElement(f.ControlLabel,null,"Tipos de archivo válidos:")),s.default.createElement("div",{className:"col-md-5"},s.default.createElement(f.FormGroup,null,s.default.createElement(f.FormControl,{componentClass:"select",defaultValue:this.props.question.file_type,onChange:this.updateMimeTypeHandler},e))),s.default.createElement("div",{className:"col-md-4"},s.default.createElement(f.Checkbox,{className:"pull-left",defaultChecked:this.props.question.multiple,onChange:this.updateMultipleHandler},"Múltiples archivos"))))}}]),t}(s.default.Component),h=function(e){return{updateQuestion:function(t){e({type:"update_question",question:t})}}};m=(0,c.connect)(null,h)(m),t.default=m},226:function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(1),s=o(i),c=n(18),d=n(15),p=n(206),f=n(134),m=o(f),h=n(227),y=o(h),v=n(231),_=o(v),b=n(228),E=o(b),g=n(230),C=o(g),q=n(225),k=o(q),w=n(229),x=o(w),O=n(135),H=o(O),N=function(t){function n(){var t,o,u,l;r(this,n);for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return o=u=a(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(s))),u.postForm=function(){u.props.dispatchSetFetching();var t=0===u.props.form.id,n=t?"/api/forms/":"/api/forms/"+u.props.form.id+"/";e(n,{method:t?"POST":"PUT",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":H.default.getCookie("csrftoken")},body:JSON.stringify(u.props.form)}).then(function(e){return e.json()}).then(function(e){return u.props.dispatchPostFormSuccess(e.id)}).catch(function(e){return u.props.dispatchPostFormError()})},u.addTextQuestionHandler=function(){u.props.dispatchAddQuestion(u.getNewQuestion("text"))},u.addListQuestionHandler=function(){var e=u.getNewQuestion("list");e.next_id=2,e.choices=[{key:1,value:"",text:""}],u.props.dispatchAddQuestion(e)},u.addTableQuestionHandler=function(){var e=u.getNewQuestion("table");e.next_sub_question_id=2,e.next_column_id=2,e.sub_questions=[{key:1,value:"",text:"",required:!0}],e.columns=[{key:1,code_suffix:"",type:"list",header:"",next_id:2,choices:[{key:1,value:"",text:""}]}],u.props.dispatchAddQuestion(e)},u.addFileInputHandler=function(){var e=u.getNewQuestion("file");e.multiple=!1,e.lebel="Archivo",e.file_type="file",e.mime_type="*/*",u.props.dispatchAddQuestion(e)},u.addHeaderHandler=function(){u.props.dispatchAddQuestion({key:u.props.form.contents.next_id,code:"",type:"header",header:""})},u.addRelatedHandler=function(){var e=u.getNewQuestion("related");e.form_id=0,e.form_name="",e.multiple=!1,u.props.dispatchAddQuestion(e)},u.dismissNotificationHandler=function(){u.props.dispatchDismissNotifications()},u.updateTextHandler=function(e,t){u.props.dispatchUpdateText("update_"+e,t)},l=o,a(u,l)}return u(n,t),l(n,[{key:"getForm",value:function(){var t=this;this.props.dispatchSetFetching();var n="/api/forms/"+form_id+"/?format=json";e(n,{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){return t.props.dispatchGetFormSuccess(e)}).catch(function(e){return t.props.dispatchGetFormError()})}},{key:"getNewQuestion",value:function(e){return{key:this.props.form.contents.next_id,code:"",type:e,question:"",help_text:"",required:!0,conditional:!1}}},{key:"componentDidMount",value:function(){0!==form_id&&this.getForm()}},{key:"componentDidUpdate",value:function(){"add_question"===this.props.status.last_action&&this.refs.buttonBar.scrollIntoView()}},{key:"render",value:function(){var e=this,t=this.props.form.contents.questions.map(function(t){return"header"===t.type?s.default.createElement(y.default,{key:t.key,question:t}):"text"===t.type?s.default.createElement(_.default,{key:t.key,question:t,active:e.props.status.active_element,showRequired:!0}):"list"===t.type?s.default.createElement(_.default,{key:t.key,question:t,showRequired:!0},s.default.createElement(E.default,{question:t})):"table"===t.type?s.default.createElement(_.default,{key:t.key,question:t},s.default.createElement(C.default,{question:t})):"file"===t.type?s.default.createElement(_.default,{key:t.key,question:t,showRequired:!0},s.default.createElement(k.default,{question:t})):"related"===t.type?s.default.createElement(_.default,{key:t.key,question:t,showRequired:!0},s.default.createElement(x.default,{question:t})):""});return s.default.createElement("div",{className:"form-builder"},s.default.createElement(m.default,{code:"name",size:"large",label:"Nombre",text:this.props.form.name,updateText:this.updateTextHandler}),s.default.createElement(m.default,{code:"description",label:"Descripción",text:this.props.form.description,textarea:!0,updateText:this.updateTextHandler}),t,s.default.createElement("div",{ref:"buttonBar",className:"form-footer"},s.default.createElement(d.ButtonToolbar,null,s.default.createElement(d.ButtonGroup,null,s.default.createElement(d.Button,{bsStyle:"primary",onClick:this.addHeaderHandler},s.default.createElement(d.Glyphicon,{glyph:"header"})," Encabezado")),s.default.createElement(d.ButtonGroup,null,s.default.createElement(d.Button,{bsStyle:"primary",onClick:this.addTextQuestionHandler},s.default.createElement(d.Glyphicon,{glyph:"font"})," Texto"),s.default.createElement(d.Button,{bsStyle:"primary",onClick:this.addListQuestionHandler},s.default.createElement(d.Glyphicon,{glyph:"list"})," Lista"),s.default.createElement(d.Button,{bsStyle:"primary",onClick:this.addTableQuestionHandler},s.default.createElement(d.Glyphicon,{glyph:"th"})," Tabla"),s.default.createElement(d.Button,{bsStyle:"primary",onClick:this.addFileInputHandler},s.default.createElement(d.Glyphicon,{glyph:"paperclip"})," Archivo")),s.default.createElement(d.ButtonGroup,null,s.default.createElement(d.Button,{bsStyle:"primary",onClick:this.addRelatedHandler},s.default.createElement(d.Glyphicon,{glyph:"link"})," Formulario relacionado")),s.default.createElement(d.ButtonGroup,{className:"pull-right"},s.default.createElement(d.Button,{disabled:this.props.status.is_fetching,onClick:this.props.status.is_fetching?null:this.postForm},this.props.status.is_fetching?"Guardando...":"Guardar")))),s.default.createElement(p.Notification,{isActive:this.props.status.message.length>0,message:this.props.status.message,onDismiss:this.dismissNotificationHandler}))}}]),n}(s.default.Component),j=function(e){return{form:e.form,status:e.status}},P=function(e){return{dispatchUpdateText:function(t,n){e({type:t,text:n})},dispatchAddQuestion:function(t){e({type:"add_question",question:t})},dispatchGetFormSuccess:function(t){e({type:"get_form_success",form:t})},dispatchGetFormError:function(){e({type:"get_form_error"})},dispatchPostFormSuccess:function(t){e({type:"post_form_success",id:t})},dispatchPostFormError:function(){e({type:"post_form_error"})},dispatchSetFetching:function(){e({type:"set_fetching"})},dispatchDismissNotifications:function(){e({type:"status_dismiss_notification"})}}};N=(0,c.connect)(j,P)(N),t.default=N}).call(t,n(66))},227:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(1),s=o(i),c=n(18),d=n(22),p=o(d),f=n(15),m=function(e){function t(){var e,n,o,u;r(this,t);for(var l=arguments.length,i=Array(l),s=0;s<l;s++)i[s]=arguments[s];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.updateHeaderTextHandler=function(e){o.props.updateQuestion((0,p.default)(o.props.question,{header:{$set:e.target.value}}))},o.removeQuestionHandler=function(){o.props.removeQuestion(o.props.question.key)},u=n,a(o,u)}return u(t,e),l(t,[{key:"render",value:function(){return s.default.createElement("div",{className:"element"},s.default.createElement("div",{className:"row header"},s.default.createElement("div",{className:"col-md-9"},s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-md-12"},s.default.createElement(f.FormGroup,{bsSize:"large"},s.default.createElement(f.FormControl,{type:"text",placeholder:"Encabezado",defaultValue:this.props.question.header,onChange:this.updateHeaderTextHandler}))))),s.default.createElement("div",{className:"col-md-3"},s.default.createElement(f.Button,{className:"pull-right",bsStyle:"link",bsSize:"small",onClick:this.removeQuestionHandler,tabIndex:"-1"},s.default.createElement(f.Glyphicon,{glyph:"trash"})))))}}]),t}(s.default.Component),h=function(e){return{updateQuestion:function(t){e({type:"update_question",question:t})},removeQuestion:function(t){e({type:"remove_question",key:t})}}};m=(0,c.connect)(null,h)(m),t.default=m},228:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(1),s=o(i),c=n(18),d=n(22),p=o(d),f=n(84),m=o(f),h=function(e){function t(){var e,n,o,u;r(this,t);for(var l=arguments.length,i=Array(l),s=0;s<l;s++)i[s]=arguments[s];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.addChoiceHandler=function(e){o.props.updateQuestion((0,p.default)(o.props.question,{next_id:{$set:o.props.question.next_id+1},choices:{$push:[e]}}))},o.updateChoiceHandler=function(e,t){o.props.updateQuestion((0,p.default)(o.props.question,{choices:{$splice:[[e,1,t]]}}))},o.removeChoiceHandler=function(e){o.props.updateQuestion((0,p.default)(o.props.question,{choices:{$splice:[[e,1]]}}))},u=n,a(o,u)}return u(t,e),l(t,[{key:"render",value:function(){return s.default.createElement("div",{className:"list-question"},s.default.createElement(m.default,{listType:"radio",choices:this.props.question.choices,next_id:this.props.question.next_id,addChoice:this.addChoiceHandler,updateChoice:this.updateChoiceHandler,removeChoice:this.removeChoiceHandler,valuePlaceholder:"Valor",textPlaceholder:"Opción",buttonText:"Agregar opción"}))}}]),t}(s.default.Component),y=function(e){return{updateQuestion:function(t){e({type:"update_question",question:t})}}};h=(0,c.connect)(null,y)(h),t.default=h},229:function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(1),s=o(i),c=n(18),d=n(22),p=o(d),f=n(15),m=function(t){function n(e){r(this,n);var t=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.updateRelatedFormHandler=function(e){var n="0"!=e.target.value?e.target.options[e.target.selectedIndex].innerHTML:"";t.props.updateQuestion((0,p.default)(t.props.question,{form_id:{$set:parseInt(e.target.value)},form_name:{$set:n}}))},t.updateMultipleHandler=function(){t.props.updateQuestion((0,p.default)(t.props.question,{multiple:{$set:!t.props.question.multiple}}))},t.state={forms:[]},t}return u(n,t),l(n,[{key:"componentDidMount",value:function(){var t=this;e("/api/forms/simple?format=json",{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){t.setState({forms:e})}).catch(function(e){console.log("Error",e)})}},{key:"render",value:function(){var e=this.state.forms.map(function(e){return s.default.createElement("option",{key:e.id,value:e.id},e.name)});return s.default.createElement("div",{className:"file-input"},s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-md-3"},s.default.createElement(f.ControlLabel,null,"Formulario relacionado:")),s.default.createElement("div",{className:"col-md-5"},s.default.createElement(f.FormGroup,null,s.default.createElement(f.FormControl,{componentClass:"select",defaultValue:this.props.question.form_id,onChange:this.updateRelatedFormHandler},s.default.createElement("option",{value:"0"},"Selecciona un formulario..."),e))),s.default.createElement("div",{className:"col-md-4"},s.default.createElement(f.Checkbox,{className:"pull-left",defaultChecked:this.props.question.multiple,onChange:this.updateMultipleHandler},"Múltiples registros"))))}}]),n}(s.default.Component),h=function(e){return{updateQuestion:function(t){e({type:"update_question",question:t})}}};m=(0,c.connect)(null,h)(m),t.default=m}).call(t,n(66))},230:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(1),s=o(i),c=n(18),d=n(22),p=o(d),f=n(15),m=n(84),h=o(m),y=n(224),v=o(y),_=function(e){function t(){var e,n,o,u;r(this,t);for(var l=arguments.length,i=Array(l),s=0;s<l;s++)i[s]=arguments[s];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.addSubQuestion=function(e){o.props.updateQuestion((0,p.default)(o.props.question,{next_sub_question_id:{$set:o.props.question.next_sub_question_id+1},
sub_questions:{$push:[e]}}))},o.updateSubQuestion=function(e,t){o.props.updateQuestion((0,p.default)(o.props.question,{sub_questions:{$splice:[[e,1,t]]}}))},o.removeSubQuestion=function(e){o.props.updateQuestion((0,p.default)(o.props.question,{sub_questions:{$splice:[[e,1]]}}))},o.addColumnHandler=function(){var e={key:o.props.question.next_column_id,code_suffix:"",type:"radio",header:"",next_id:2,choices:[{key:1,value:"",text:""}]};o.props.updateQuestion((0,p.default)(o.props.question,{next_column_id:{$set:o.props.question.next_column_id+1},columns:{$push:[e]}}))},o.updateColumnHandler=function(e){o.props.updateQuestion((0,p.default)(o.props.question,{columns:{$splice:[[o.props.question.columns.findIndex(function(t){return t.key===e.key}),1,e]]}}))},o.removeColumnHandler=function(e){o.props.updateQuestion((0,p.default)(o.props.question,{columns:{$splice:[[o.props.question.columns.findIndex(function(t){return t.key===e}),1]]}}))},u=n,a(o,u)}return u(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props.question.columns.length>1,n=this.props.question.columns.map(function(n){return s.default.createElement(v.default,{key:n.key,column:n,showCodeSuffix:t,updateColumn:e.updateColumnHandler,removeColumn:e.removeColumnHandler})});return s.default.createElement("div",{className:"table-question"},s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-md-12"},s.default.createElement("h4",null,"Sub-preguntas"),s.default.createElement(h.default,{listType:"simple",choices:this.props.question.sub_questions,next_id:this.props.question.next_sub_question_id,addChoice:this.addSubQuestion,updateChoice:this.updateSubQuestion,removeChoice:this.removeSubQuestion,valuePlaceholder:"Código",textPlaceholder:"Sub-pregunta",showRequired:!0,buttonText:"Agregar sub-pregunta"}))),s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-md-9"},s.default.createElement("h4",null,"Columnas")),s.default.createElement("div",{className:"col-md-3"},s.default.createElement(f.Button,{onClick:this.addColumnHandler},s.default.createElement(f.Glyphicon,{glyph:"plus"})," Agregar columna"))),s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-md-12"},n)))}}]),t}(s.default.Component),b=function(e){return{updateQuestion:function(t){e({type:"update_question",question:t})}}};_=(0,c.connect)(null,b)(_),t.default=_},231:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(1),s=o(i),c=n(18),d=n(22),p=o(d),f=n(15),m=function(e){function t(){var e,n,o,u;r(this,t);for(var l=arguments.length,i=Array(l),s=0;s<l;s++)i[s]=arguments[s];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.updateCodeHandler=function(e){o.props.updateQuestion((0,p.default)(o.props.question,{code:{$set:e.target.value}}))},o.updateQuestionTextHandler=function(e){o.props.updateQuestion((0,p.default)(o.props.question,{question:{$set:e.target.value}}))},o.updateHelpTextHandler=function(e){o.props.updateQuestion((0,p.default)(o.props.question,{help_text:{$set:e.target.value}}))},o.updateRequiredHandler=function(){o.props.updateQuestion((0,p.default)(o.props.question,{required:{$set:!o.props.question.required}}))},o.updateConditionalHandler=function(){var e=(0,p.default)(o.props.question,{conditional:{$set:!o.props.question.conditional}});e=o.props.question.conditional?(0,p.default)(e,{condition:{$set:void 0}}):(0,p.default)(e,{condition:{$set:{question_key:0,question_value:0}}}),o.props.updateQuestion(e)},o.removeQuestionHandler=function(){o.props.removeQuestion(o.props.question.key)},o.onElementClickHandler=function(){o.props.setActiveElement(o.props.question.key)},o.onConditionUpdateHandler=function(e){o.props.updateQuestion((0,p.default)(o.props.question,{condition:{question_key:{$set:e.target.value}}}))},o.onConditionValueUpdateHandler=function(e){o.props.updateQuestion((0,p.default)(o.props.question,{condition:{question_value:{$set:e.target.value}}}))},u=n,a(o,u)}return u(t,e),l(t,[{key:"render",value:function(){var e=this,t="element ";this.props.question.key===this.props.active&&(t+="active");var n="",o="";if(this.props.showRequired&&(n=s.default.createElement(f.Checkbox,{className:"pull-left",defaultChecked:this.props.question.required,onChange:this.updateRequiredHandler},"Obligatoria")),this.props.question.conditional){var r=this.props.questions.map(function(e){if("list"===e.type)return s.default.createElement("option",{key:e.key,value:e.code},e.code+". "+e.question)}),a="";if(0!=this.props.question.condition.question_key){var u=this.props.questions.filter(function(t){return t.code===e.props.question.condition.question_key})[0];a=u.choices.map(function(e){return s.default.createElement("option",{key:e.key,value:e.value},e.text)})}o=s.default.createElement("div",{className:"row condition"},s.default.createElement("div",{className:"col-md-2"},s.default.createElement(f.ControlLabel,null,"Ocultar si")),s.default.createElement("div",{className:"col-md-5"},s.default.createElement(f.FormGroup,null,s.default.createElement(f.FormControl,{defaultValue:this.props.question.condition.question_key,componentClass:"select",onChange:this.onConditionUpdateHandler},s.default.createElement("option",{value:"0"},"Selecciona una pregunta ... "),r))),s.default.createElement("div",{className:"col-md-2"},s.default.createElement(f.ControlLabel,null,"Es igual a")),s.default.createElement("div",{className:"col-md-3"},s.default.createElement(f.FormGroup,null,s.default.createElement(f.FormControl,{defaultValue:this.props.question.condition.question_value,componentClass:"select",onChange:this.onConditionValueUpdateHandler},s.default.createElement("option",{value:"0"},"Selecciona una pregunta ... "),a))))}return s.default.createElement("div",{className:t,onClick:this.onElementClickHandler},s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-md-9"},s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-md-2"},s.default.createElement(f.FormGroup,null,s.default.createElement(f.FormControl,{type:"text",placeholder:"Código",defaultValue:this.props.question.code,onChange:this.updateCodeHandler}))),s.default.createElement("div",{className:"col-md-10"},s.default.createElement(f.FormGroup,null,s.default.createElement(f.FormControl,{type:"text",placeholder:"Pregunta",defaultValue:this.props.question.question,onChange:this.updateQuestionTextHandler})))),s.default.createElement("div",{className:"row help-input"},s.default.createElement("div",{className:"col-md-12"},s.default.createElement(f.FormGroup,{bsSize:"small"},s.default.createElement(f.FormControl,{type:"text",placeholder:"Texto de ayuda (opcional)",defaultValue:this.props.question.help_text,onChange:this.updateHelpTextHandler})))),o),s.default.createElement("div",{className:"col-md-2"},n,s.default.createElement(f.Checkbox,{className:"pull-left",defaultChecked:this.props.question.conditional,onChange:this.updateConditionalHandler},"Condicional")),s.default.createElement("div",{className:"col-md-1"},s.default.createElement(f.Button,{className:"pull-right",bsStyle:"link",bsSize:"small",onClick:this.removeQuestionHandler,tabIndex:"-1"},s.default.createElement(f.Glyphicon,{glyph:"trash"})))),s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-md-12"},this.props.children)))}}]),t}(s.default.Component),h=function(e){return{questions:e.form.contents.questions}},y=function(e){return{updateQuestion:function(t){e({type:"update_question",question:t})},removeQuestion:function(t){e({type:"remove_question",key:t})},setActiveElement:function(t){e({type:"update_active_element",key:t})}}};m=(0,c.connect)(h,y)(m),t.default=m},241:function(e,t){}});